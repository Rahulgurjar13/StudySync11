â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ğŸ¯ DEPLOYMENT ARCHITECTURE                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ‘¤ USER (Browser)                                               â”‚
â”‚  https://studysync11.vercel.app                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
                 â”‚ HTTP Requests + WebSocket
                 â”‚
                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸŒ VERCEL (Frontend)                                            â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€   â”‚
â”‚  â€¢ React + Vite Application                                      â”‚
â”‚  â€¢ Static files served globally via CDN                          â”‚
â”‚  â€¢ Environment Variables:                                        â”‚
â”‚    â””â”€ VITE_API_URL=https://studysync-backend-2.onrender.com    â”‚
â”‚                                                                  â”‚
â”‚  Files using VITE_API_URL:                                       â”‚
â”‚  âœ… src/lib/api.ts                                              â”‚
â”‚  âœ… src/pages/StudyRoom.tsx (Socket.IO)                         â”‚
â”‚  âœ… src/components/PomodoroTimer.tsx                            â”‚
â”‚  âœ… src/components/PointsDisplay.tsx                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
                 â”‚ API Calls + Socket.IO
                 â”‚
                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸš€ RENDER (Backend)                                             â”‚
â”‚  https://studysync-backend-2.onrender.com                        â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€   â”‚
â”‚  â€¢ Node.js + Express Server                                      â”‚
â”‚  â€¢ Socket.IO for real-time features                              â”‚
â”‚  â€¢ Environment Variables:                                        â”‚
â”‚    â””â”€ MONGODB_URI=mongodb+srv://...                             â”‚
â”‚    â””â”€ JWT_SECRET=your-secret-key                                â”‚
â”‚    â””â”€ NODE_ENV=production                                       â”‚
â”‚                                                                  â”‚
â”‚  API Endpoints:                                                  â”‚
â”‚  â€¢ POST /api/auth/login                                          â”‚
â”‚  â€¢ POST /api/auth/register                                       â”‚
â”‚  â€¢ GET  /api/auth/me                                             â”‚
â”‚  â€¢ GET  /api/tasks                                               â”‚
â”‚  â€¢ POST /api/focus/session                                       â”‚
â”‚  â€¢ GET  /api/focus/today                                         â”‚
â”‚  â€¢ Socket.IO events: join-room, focus-start, etc.               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
                 â”‚ Database Queries
                 â”‚
                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ—„ï¸ MONGODB ATLAS (Database)                                     â”‚
â”‚  mongodb+srv://cluster0.ep5xkwa.mongodb.net/tandem-track-mate   â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€   â”‚
â”‚  â€¢ Cloud-hosted MongoDB (Free M0 tier)                           â”‚
â”‚  â€¢ Collections:                                                  â”‚
â”‚    â””â”€ users (authentication)                                     â”‚
â”‚    â””â”€ tasks (todo items)                                         â”‚
â”‚    â””â”€ focussessions (timer data)                                â”‚
â”‚    â””â”€ partnerships (study partners)                             â”‚
â”‚    â””â”€ pointstransactions (XP system)                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ”„ DATA FLOW EXAMPLE: User Starts Timer

1. ğŸ‘¤ User clicks "Start" on frontend
   â”‚
   â–¼
2. ğŸŒ Vercel Frontend (React)
   â”‚  const API_URL = import.meta.env.VITE_API_URL
   â”‚  fetch(`${API_URL}/api/focus/session`, ...)
   â”‚
   â–¼
3. ğŸš€ Render Backend receives:
   â”‚  POST https://studysync-backend-2.onrender.com/api/focus/session
   â”‚  { focusMinutes: 25, sessionType: 'focus' }
   â”‚
   â–¼
4. ğŸ—„ï¸ MongoDB stores:
   â”‚  {
   â”‚    userId: "69072346e5659d514ba0df62",
   â”‚    date: "2025-11-06",
   â”‚    focusMinutes: 25,
   â”‚    sessionStartTime: ISODate("2025-11-06T10:30:00Z")
   â”‚  }
   â”‚
   â–¼
5. ğŸš€ Backend responds:
   â”‚  { success: true, session: {...} }
   â”‚
   â–¼
6. ğŸŒ Frontend updates UI:
   â”‚  Timer starts counting down
   â”‚
   â–¼
7. ğŸ”Œ Socket.IO emits:
   â”‚  const socket = io(API_URL)
   â”‚  socket.emit('focus-start', {...})
   â”‚
   â–¼
8. ğŸš€ Backend broadcasts to partner:
   â”‚  socket.to(roomCode).emit('partner-focus-start', {...})
   â”‚
   â–¼
9. ğŸ‘¥ Partner sees notification:
   â”‚  "ğŸ¯ Partner started focusing!"

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸš¨ THE PROBLEM (Before Fix):

Frontend was trying to connect to localhost:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Vercel    â”‚â”€â”€Xâ”€â”€â–¶ ws://localhost:3001  âŒ FAILS!
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       (localhost doesn't exist on Vercel)

âœ… THE SOLUTION (After Fix):

Frontend now uses environment variable:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Vercel    â”‚â”€â”€âœ“â”€â”€â–¶ wss://studysync-backend-2.onrender.com  âœ…
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       (actual backend URL)

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“ DEPLOYMENT CHECKLIST:

Backend (Render):
âœ… Deployed at: https://studysync-backend-2.onrender.com
âœ… MongoDB connected
âœ… Environment variables set (MONGODB_URI, JWT_SECRET)
âœ… CORS configured for Vercel domain
âœ… Socket.IO enabled

Frontend (Vercel):
â³ Add environment variable: VITE_API_URL
â³ Redeploy (automatic on git push)
â³ Verify no localhost errors in console

Database (MongoDB Atlas):
âœ… Cluster created and running
âœ… User created with read/write access
âœ… Network access: Allow from anywhere (0.0.0.0/0)
âœ… Connection string in Render backend

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ¯ NEXT STEP:

Go to Vercel â†’ Settings â†’ Environment Variables â†’ Add:

Name:  VITE_API_URL
Value: https://studysync-backend-2.onrender.com

Then wait 2 minutes for auto-deploy! ğŸš€

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
